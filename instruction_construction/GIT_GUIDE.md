# Руководство по работе с Git

## Проверка что всё настроено правильно

```powershell
# Проверить связь с GitHub
git remote -v
# Должно показать: origin https://github.com/silveriumX/instruction_construction.git

# Проверить текущую ветку
git branch
# Должно показать: * main

# Проверить статус
git status
# Покажет изменённые/новые файлы
```

---

## Основные команды

### 1. Посмотреть что изменилось

```powershell
git status              # Список изменённых файлов
git diff                # Показать конкретные изменения в файлах
git diff README.md      # Изменения в конкретном файле
```

### 2. Сохранить изменения (коммит)

```powershell
# Шаг 1: Добавить файлы
git add .               # Добавить ВСЕ изменённые файлы
git add README.md       # Добавить конкретный файл
git add docs/           # Добавить папку

# Шаг 2: Создать коммит
git commit -m "Описание что сделано"

# Шаг 3: Отправить на GitHub
git push
```

### 3. Получить изменения с GitHub

```powershell
git pull                # Скачать новые коммиты с GitHub
```

---

## Откаты (как отменить изменения)

### Отменить изменения в файле (до коммита)

```powershell
# Файл изменён, но НЕ добавлен (git add не делали)
git checkout -- README.md       # Вернуть файл к последнему коммиту

# Файл добавлен (git add сделали), но НЕ закоммичен
git reset HEAD README.md        # Убрать из staging
git checkout -- README.md       # Вернуть содержимое
```

### Отменить последний коммит

```powershell
# Отменить коммит, но СОХРАНИТЬ изменения в файлах
git reset --soft HEAD~1

# Отменить коммит И изменения (ОСТОРОЖНО - потеряете изменения!)
git reset --hard HEAD~1
```

### Отменить коммит который уже на GitHub

```powershell
# Создаёт НОВЫЙ коммит, который отменяет изменения (безопасно)
git revert HEAD
git push
```

---

## История коммитов

```powershell
git log                     # Полная история
git log --oneline           # Краткая история (одна строка = один коммит)
git log --oneline -5        # Последние 5 коммитов
git log --graph             # С визуализацией веток
```

---

## Частые ошибки и решения

### Ошибка: "Updates were rejected"

```
! [rejected] main -> main (fetch first)
```

**Причина:** На GitHub есть коммиты, которых нет у вас локально.

**Решение:**
```powershell
git pull --rebase
git push
```

### Ошибка: "Please commit or stash your changes"

**Причина:** Есть незакоммиченные изменения.

**Решение:**
```powershell
# Вариант 1: Закоммитить
git add .
git commit -m "Сохраняю изменения"

# Вариант 2: Временно отложить
git stash                   # Спрятать изменения
git pull                    # Сделать нужное
git stash pop               # Вернуть изменения
```

### Ошибка: "Merge conflict"

**Причина:** Вы и кто-то другой изменили одни и те же строки.

**Решение:**
1. Откройте файл с конфликтом
2. Найдите маркеры `<<<<<<`, `======`, `>>>>>>`
3. Оставьте нужный вариант, удалите маркеры
4. `git add .` и `git commit -m "Resolve conflict"`

### Ошибка авторизации

```powershell
# Проверить сохранённые учётные данные
git config --global credential.helper

# Сбросить и ввести заново
git config --global --unset credential.helper
git push  # Попросит ввести логин/пароль заново
```

---

## Работа через Cursor (GUI)

### Где находится

- Слева в боковой панели значок **Source Control** (Ctrl+Shift+G)

### Как использовать

1. **Увидеть изменения** — изменённые файлы показаны в списке
2. **Посмотреть diff** — клик на файл покажет что изменилось
3. **Добавить в коммит** — нажать **+** рядом с файлом
4. **Создать коммит** — написать сообщение сверху, нажать **✓** (галочку)
5. **Push/Pull** — кнопка **...** → Push или Pull

### Иконки статуса файлов

- **M** (Modified) — файл изменён
- **U** (Untracked) — новый файл, ещё не отслеживается
- **D** (Deleted) — файл удалён
- **A** (Added) — файл добавлен в staging

---

## Полезные настройки

```powershell
# Показывать статус на русском (если нужно)
git config --global core.quotepath false

# Запомнить учётные данные
git config --global credential.helper store

# Установить имя и email (для коммитов)
git config --global user.name "Ваше Имя"
git config --global user.email "your@email.com"
```

---

## Шпаргалка (быстрый справочник)

| Что сделать | Команда |
|------------|---------|
| Статус | `git status` |
| Добавить всё | `git add .` |
| Коммит | `git commit -m "текст"` |
| Отправить | `git push` |
| Получить | `git pull` |
| История | `git log --oneline` |
| Отменить изменения в файле | `git checkout -- файл` |
| Отменить последний коммит | `git reset --soft HEAD~1` |
| Посмотреть изменения | `git diff` |

---

*Последнее обновление: Январь 2026*
