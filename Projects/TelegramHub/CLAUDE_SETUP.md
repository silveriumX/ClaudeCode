# Настройка Claude AI для TelegramHub

## Быстрый старт

Система уже настроена на использование Claude AI. Осталось только добавить API ключ.

### Получение API ключа Claude

1. Зайдите на https://console.anthropic.com/
2. Зарегистрируйтесь или войдите
3. Перейдите в раздел "API Keys"
4. Создайте новый ключ
5. Скопируйте ключ

### Установка ключа

Откройте `server/config.py` и замените строку:

```python
AI_API_KEY = os.getenv("AI_API_KEY", "")
```

на:

```python
AI_API_KEY = os.getenv("AI_API_KEY", "ваш_claude_api_ключ_здесь")
```

Или создайте файл `.env` в корне проекта:

```
AI_PROVIDER=anthropic
AI_API_KEY=ваш_claude_api_ключ_здесь
AI_MODEL=claude-3-5-sonnet-20241022
```

### Кастомные инструкции (Tone of Voice)

В `config.py` уже настроены правила стиля:

- НЕ использовать длинное тире (—)
- НЕ использовать двоеточие (:) без необходимости
- Писать естественно
- Быть кратким
- Адаптироваться под стиль собеседника

Чтобы изменить инструкции, отредактируйте переменную `AI_CUSTOM_INSTRUCTIONS` в `server/config.py`.

## Новые возможности

### 1. Кастомный промпт к AI

В интерфейсе чата теперь есть поле для ввода своих уточнений к AI:
- Нажмите кнопку с иконкой AI (робот)
- В открывшейся панели введите свой запрос (например: "ответь формально" или "предложи встречу на следующей неделе")
- Нажмите "Генерировать"
- AI предложит 3 варианта ответа с учётом вашего запроса
- Нажмите "Сохранить" у понравившегося варианта
- Вариант сохранится в черновики

### 2. Черновики вместо автоматической отправки

Система **НЕ отправляет** сообщения автоматически. Все варианты ответов сохраняются в черновики, откуда вы можете:
- Скопировать текст
- Отредактировать перед отправкой
- Отправить вручную

### 3. Workflow использования

1. **Review Mode** - последовательно просматривайте непрочитанные чаты
2. **AI анализ** - видите саммари, срочность, sentiment
3. **Кастомный промпт** - добавляете свои требования к ответу
4. **Генерация вариантов** - AI предлагает 3 ответа
5. **Сохранение** - выбираете лучший, он сохраняется в черновики
6. **Ручная отправка** - копируете из черновиков и отправляете сами

## Модели Claude

- `claude-3-5-sonnet-20241022` (рекомендуется) - лучшее качество, дороже
- `claude-3-haiku-20240307` - быстрее и дешевле, подходит для большого объёма

Модель настраивается в `config.py` переменной `AI_MODEL`.

## Надстройка к AyuGram (ответ на вопрос)

**Да, возможно!** Но потребует:

### Вариант 1: Browser Extension (самый простой)

Создать расширение для браузера (если используете Telegram Web), которое:
- Парсит DOM страницы и извлекает сообщения из открытого чата
- Отправляет их на ваш TelegramHub API
- Получает варианты ответов и отображает в виде попапа
- Позволяет скопировать выбранный вариант

### Вариант 2: Desktop App с AyuGram API

AyuGram предоставляет API. Можно написать отдельное приложение (на Electron, Python + PyQt), которое:
- Подключается к AyuGram через их API
- Читает текущий открытый чат
- Отправляет на ваш TelegramHub/AI
- Показывает overlay с вариантами ответов

### Вариант 3: AutoHotkey/PyAutoGUI скрипт

Для быстрого прототипа:
- Скрипт читает выделенный текст (Ctrl+C)
- Отправляет на ваш API
- Показывает окно с вариантами
- Позволяет вставить выбранный вариант

**Рекомендация:** начните с Варианта 3 для тестирования, потом переходите к Browser Extension если работает хорошо.

Хотите, чтобы я создал простой скрипт-надстройку для тестирования?
