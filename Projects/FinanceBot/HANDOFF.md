# HANDOFF ‚Äî 2026-02-21

## –¶–µ–ª—å —Å–µ—Å—Å–∏–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∏–ø USDT-–ø–µ—Ä–µ–≤–æ–¥–∞ ("–ö–æ–Ω–µ—á–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å" vs "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∫–∏ / –¢—Ä–∞–Ω–∑–∏—Ç")
—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞—è–≤–∫–∞—Ö –¥–æ –æ–ø–ª–∞—Ç—ã.

## –°–¥–µ–ª–∞–Ω–æ
- [x] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –ª–µ–π–±–ª "–í—ã–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é" ‚Üí "–ö–æ–Ω–µ—á–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å" (request.py)
- [x] `update_request_fields()` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä `category` –¥–ª—è USDT, col F (sheets.py)
- [x] `edit_usdt_type_menu()` + `set_usdt_type_callback()` ‚Äî –Ω–æ–≤—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã (edit_handlers.py)
- [x] –ö–Ω–æ–ø–∫–∞ "üîÑ –¢–∏–ø –ø–µ—Ä–µ–≤–æ–¥–∞" –≤ –º–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è USDT-–∑–∞—è–≤–æ–∫ (request.py)
- [x] –ù–æ–≤—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ bot.py
- [x] –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ VPS, 26 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ (91/91 pytest) (–∫–æ–º–º–∏—Ç: ed1f50b)

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ë–æ—Ç –Ω–∞ VPS: —Ä–∞–±–æ—Ç–∞–µ—Ç (deploy —Å–¥–µ–ª–∞–Ω)
- –¢–µ—Å—Ç—ã: ‚úÖ 91/91 pytest (legacy: 3 –ø–∞–¥–µ–Ω–∏—è ‚Äî pre-existing, –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã–µ)
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç: ed1f50b

## –ß—Ç–æ —Ä–µ—à–∏–ª–∏ –∏ –ø–æ—á–µ–º—É
- –¢–∏–ø —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–ª–æ–Ω–∫–µ "–ö–∞—Ç–µ–≥–æ—Ä–∏—è" (col F USDT –ª–∏—Å—Ç–∞) ‚Äî –±–µ–∑ —Å—Ö–µ–º–∞-–º–∏–≥—Ä–∞—Ü–∏–∏
- edit_usdt_type ‚Äî standalone CallbackQueryHandler, –Ω–µ ConversationHandler (–Ω–µ—Ç —Ç–µ–∫—Å—Ç–≤–æ–≥–æ –≤–≤–æ–¥–∞)
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ "–ö–æ–Ω–µ—á–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å" ‚Üí –∞–≤—Ç–æ-–∫–∞—Ç–µ–≥–æ—Ä–∏—è —á–µ—Ä–µ–∑ `determine_category(edit_purpose)`
- `edit_purpose` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `user_data` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `edit_menu_callback`

## –ß—Ç–æ –ù–ï –ø—Ä–æ–±–æ–≤–∞—Ç—å
- pytest-asyncio –≤—ã—à–µ 0.21.x ‚Üí 330 –ø–∞–¥–µ–Ω–∏–π (PTB PR #4607)
- –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å `edit_usdt_type` –≤–Ω—É—Ç—Ä—å ConversationHandler ‚Äî —Ç–∞–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ: —Å–æ–∑–¥–∞—Ç—å USDT-–∑–∞—è–≤–∫—É –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Sheets col F
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞—è–≤–∫–µ (–∫–Ω–æ–ø–∫–∞ "üîÑ –¢–∏–ø –ø–µ—Ä–µ–≤–æ–¥–∞")
3. –°–ª–µ–¥—É—é—â–∞—è —Ñ–∏—á–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É

## –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/handlers/edit_handlers.py` ‚Äî edit_usdt_type_menu, set_usdt_type_callback
- `src/handlers/request.py` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ (~109-127) –∏ –º–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (~1125-1132)
- `src/sheets.py` ‚Äî update_request_fields —Å category (~878-887)
- `tests/test_usdt_type_editing.py` ‚Äî 26 —Ç–µ—Å—Ç–æ–≤ –Ω–æ–≤–æ–π —Ñ–∏—á–∏

## –°–ø—Ä–∞–≤–∫–∞
- –¢–µ—Å—Ç—ã: `PYTHONIOENCODING=utf-8 .venv/Scripts/python -m pytest -v`
- Legacy: `PYTHONIOENCODING=utf-8 .venv/Scripts/python tests/test_block4_users.py`
- Deploy: `.venv/Scripts/python vps_connect.py deploy`
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç: ed1f50b ‚Äî —Ç–µ—Å—Ç—ã ‚úÖ 91/91
