# ADR-001: Деактивация пользователей — очистка роли vs удаление строки

## Статус
Принято (2026-02-19)

## Контекст
Нам нужно было решить, что происходит когда владелец "удаляет" пользователя
из панели управления. Два варианта:
- (A) Удалить строку из листа Пользователи (delete_rows)
- (B) Очистить только ячейку роли (update_cell → '')

## Решение
Выбрали вариант **(B) — очистить ячейку роли**.

Функция называется `deactivate_user()`, не `delete_user()` или `remove_user()`.
В боте кнопка называется "Заблокировать (убрать роль)".

## Последствия

**Плюсы:**
- История пользователя (имя, username, дата регистрации) сохраняется
- Операция обратима: `update_user_role()` реактивирует пользователя
- `get_user_role()` возвращает None для пустой роли → доступ закрыт без изменений в логике авторизации

**Минусы:**
- Лист растёт со временем (неактивные строки не чистятся)
- Запросы "все активные" должны фильтровать по role != ''

## Ссылки
- Реализация: `src/sheets.py` → `deactivate_user()`
- UI: `src/handlers/owner.py` → `ow_confirmrm_callback()`
- Коммит: d9a8985
