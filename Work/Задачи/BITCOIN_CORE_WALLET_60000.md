# Кошелёк Bitcoin Core с walletversion 60000 — пошаговая инструкция

**Контекст:** walletversion 60000 = поддержка сжатых публичных ключей (FEATURE_COMPRPUBKEY). Такой кошелёк создаёт **Bitcoin Core 0.6.0 / 0.6.1** (новые кошельки в этой версии уже используют 33-байтные сжатые ключи).

---

## Вариант 1: Bitcoin Core 0.6.x (кошелёк сразу с версией 60000)

### Шаг 1. Скачать Bitcoin Core 0.6.0 или 0.6.1

- **0.6.0:** https://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.6.0/
- **0.6.1 (предпочтительно, багфиксы):** https://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.6.1/

Для Windows: в папке релиза выбрать файл для Windows (например `bitcoin-0.6.1-win32.zip` или установщик, если есть).

### Шаг 2. Установить в отдельную папку

- Распаковать (или установить) в отдельную директорию, например:
  `C:\BitcoinCore-0.6.1\`
- **Не** использовать ту же папку данных, что и текущий Bitcoin Core (чтобы не перезаписать блокчейн и кошельки).

### Шаг 3. Запуск с отдельным datadir (чтобы не трогать основной узел)

Запускать с отдельным каталогом данных:

```text
"C:\BitcoinCore-0.6.1\bitcoin-qt.exe" -datadir=D:\BitcoinData06
```

(или `bitcoind.exe` вместо `bitcoin-qt.exe` если нужен только демон).
`D:\BitcoinData06` — пример; замените на свой путь. Папка будет создана при первом запуске.

### Шаг 4. Создать кошелёк

- При первом запуске Bitcoin-Qt создаст стандартный кошелёк (файл `wallet.dat` в выбранном `datadir`).
- В 0.6.x новые кошельки уже создаются с поддержкой сжатых ключей, т.е. с **walletversion 60000**.

### Шаг 5. Проверить версию кошелька

**Способ A — через Bitcoin-Qt (если есть консоль/RPC):**

- В 0.6.x в GUI может не быть пункта «Console». Тогда используйте способ B.

**Способ B — через bitcoin-cli (рекомендуется):**

1. Остановите Bitcoin-Qt (File → Exit) или оставьте запущенным, если уже включён RPC-сервер.
2. Откройте командную строку (cmd) или PowerShell.
3. Перейдите в папку с 0.6.x, например:
   ```text
   cd C:\BitcoinCore-0.6.1
   ```
4. Вызовите (подставьте свой `-datadir` и при необходимости `-rpcuser`/`-rpcpassword`, если задавали в `bitcoin.conf`):
   ```text
   bitcoin-cli -datadir=D:\BitcoinData06 getinfo
   ```
   В 0.6.x в выводе `getinfo` есть поле **`walletversion`** — должно быть **60000**.

Если в вашей сборке уже есть `getwalletinfo` (в старых версиях его могло не быть), то:

```text
bitcoin-cli -datadir=D:\BitcoinData06 getwalletinfo
```

В ответе смотрите `"walletversion": 60000`.

### Шаг 6. Дальнейшее использование

- Резервная копия: скопируйте `wallet.dat` из `D:\BitcoinData06` (или вашего `datadir`) в безопасное место.
- Для работы с этим кошельком под современным Bitcoin Core: современные версии умеют открывать старые wallet.dat и при необходимости мигрировать их; после миграции формат может измениться (например, на descriptor/sqlite), но совместимость со старыми ключами сохраняется.

---

## Вариант 2: Современный Bitcoin Core (26.x) — legacy BDB-кошелёк

В новых версиях (например 26.0) по умолчанию создаются только descriptor/sqlite кошельки. Чтобы создать именно **legacy BDB**-кошелёк (у которого в прошлом часто был walletversion 60000 после поддержки сжатых ключей):

1. Установить Bitcoin Core 26.x (или другую версию, где ещё поддерживается BDB).
2. Убедиться, что собран с поддержкой Berkeley DB.
3. Запуск с флагом устаревшего RPC:
   ```text
   bitcoind -deprecatedrpc=create_bdb
   ```
4. Создать кошелёк через RPC:
   ```text
   bitcoin-cli createwallet "legacy60000" false false "" false true true
   ```
   (актуальный набор параметров смотрите в справке: `bitcoin-cli help createwallet` для своей версии; важно включить создание BDB, а не descriptor.)
5. Проверить:
   ```text
   bitcoin-cli getwalletinfo
   ```
   В 26.x у legacy BDB кошелька поле `walletversion` может уже показывать более новое значение (например 169900 для обратной совместимости в новых версиях). То есть **гарантированно именно 60000** даёт только создание кошелька в **0.6.0/0.6.1**.

**Важно:** В Core 30.0+ поддержка создания и загрузки BDB-кошельков удалена; остаётся только миграция существующих. Поэтому для именно **walletversion 60000** надёжный путь — Вариант 1 (Bitcoin Core 0.6.x).

---

## Краткая памятка (Вариант 1)

| Шаг | Действие |
|-----|----------|
| 1 | Скачать Bitcoin Core 0.6.1 с SourceForge (папка Bitcoin/bitcoin-0.6.1). |
| 2 | Распаковать в отдельную папку (например `C:\BitcoinCore-0.6.1`). |
| 3 | Запустить с отдельным datadir: `bitcoin-qt.exe -datadir=D:\BitcoinData06`. |
| 4 | Дождаться создания кошелька при первом запуске. |
| 5 | Проверить: `bitcoin-cli -datadir=D:\BitcoinData06 getinfo` → смотреть `walletversion: 60000`. |
| 6 | Сделать бэкап `wallet.dat` из выбранного datadir. |

---

## Замечания

- **Безопасность:** 0.6.x — очень старая версия (2012), не получает обновлений. Используйте только для создания/экспорта кошелька с версией 60000; для постоянной работы и выхода в интернет предпочтительна актуальная версия Core.
- **Синхронизация:** В 0.6.x при первом запуске начнётся загрузка блокчейна; для только создания кошелька и проверки `getinfo`/`getwalletinfo` можно после появления `wallet.dat` скопировать его и дальше работать с ним в более новой версии Core при необходимости.
- **Консоль в GUI:** В старых версиях пункт «Console» (или аналог) может отсутствовать — тогда проверка версии только через `bitcoin-cli` (см. выше).

Если нужно, могу добавить в этот файл раздел под твою ОС (например только Windows) или под сценарий «только создать wallet.dat и перенести в новый Core».
