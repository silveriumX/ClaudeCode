# Задача для coding-агента: HR-бот для вакансии креатора

**Площадка:** Salebot + Google Sheets + Google Form
**Пользователь:** один HR, без разделения ролей
**Цель:** реклама вакансии в телеграм-каналах → кандидаты в боте → анкета → CRM и дашборд по источникам и воронке
**Срок:** уточнить (в чате было «один час» — возможно, имелось в виду «один месяц»).

---

## ⚠️ Источник правды

**В приоритете — ответы и комментарии заказчика в диалоге.**
Папка `Projects/CreatorBot/` — старая, там может быть **неактуальная** информация и код. Использовать её только как возможный ориентир; при любом расхождении с тем, что заказчик описал в интервью — следовать словам заказчика. **Если в чём-то не уверен — спрашивать и уточнять у заказчика.**

---

## 1. Контекст и границы

- **Реклама:** размещения в разных каналах с одной ссылкой на бота. В ссылке — **UTM-параметр** (или `start=...`), чтобы различать источник. Каналы будут добавляться — нужна возможность добавлять новые ссылки/метки без разработчика.
- **Вся логика сценария** — в Salebot. Дополнительные боты (Telegram Bot API и т.п.) не использовать.
- **Salebot:** аккаунт есть, тариф есть, сценарии уже используются. В папке CreatorBot может лежать пример бота (JSON) — только для ориентира, не считать эталоном без подтверждения заказчиком.
- **Условных переходов по ответам нет** — без ветвлений «если ответил X — не показывать анкету» и т.п.
- **Один HR** — права, роли, доступы не нужны.

---

## 2. Воронка и этапы (что считать)

Метрики в дашборде должны строиться по полной воронке:

1. **Увидели объявление** — не считаем (нет данных).
2. **Перешли по ссылке и запустили бота** — старт по ссылке с меткой (UTM / `start=...`).
3. **Прошли каждый этап воронки** — например: загрузили видео → отправили соцсети → получили ссылку на анкету → заполнили анкету (и т.д. по факту сценария).

Точный список этапов уточнять у заказчика. В диалоге упоминались: старт → этапы воронки (в т.ч. загрузка видео, соцсети, анкета). Если заказчик пришлёт пример бота или формы — использовать для согласования; иначе спрашивать.

**Важно:** в описании от пользователя фигурирует этап «загрузила видео» — нужно убедиться, что в сценарии есть шаг загрузки видео и он записывается в таблицу и в дашборд. При сомнениях — уточнить у заказчика.

---

## 3. Источники трафика (каналы)

- **Различие каналов:** только по **UTM-метке в стартовой ссылке** (например `?start=channel_1`). Одна метка = один источник. Уникальная метка на канал.
- **Добавление каналов:** HR должен иметь возможность добавлять новые ссылки/метки сам (инструкция или справочник в таблице/документации). Дополнительная разбивка (тип поста, креатив и т.д.) не нужна.
- В таблице и дашборде — один столбец/разрез «Источник» (utm_source или аналог).

---

## 4. Google Form и Google Sheets

- **Одна книга Google Sheets**, несколько листов — структура максимально удобная и скомпонованная для одного HR.
- **Заполнение:** максимально автоматическое:
  - данные из Salebot (webhook в Apps Script) пишутся в лист(ы) таблицы;
  - ответы Google Form попадают в таблицу через **нативную синхронизацию Google** (форма → таблица);
  - связь «бот ↔ таблица» реализовать через **Google Apps Script** (webhook). Нужно выбрать и реализовать самый простой и стабильный вариант (один endpoint, единый формат тела запроса от Salebot).
- **Google Form:** макет и поля будут уточнены по ссылке на пример формы (пользователь прикрепит). В форме обязательно поле для Telegram (username или ID), чтобы связывать ответы формы с строками из бота.

---

## 5. CRM для HR

- **Работа с заявками:** в **Google Таблице** (фильтры, статусы, просмотр строк). Отправка сообщений кандидатам — через **CRM в Salebot** (встроенные чаты/рассылки).
- **Статусы** (колонка в таблице, HR меняет вручную или через выпадающий список): например — «Пригласить на собеседование», «Предложить тестовую неделю», «Отказ», «Нанят» и т.п. Точный набор — по пожеланию HR; можно взять за основу статусы из `HR_ЭКОСИСТЕМА.md` (Новый, Отправил соцсети, Получил анкету, Заполнил анкету, Одобрен, Отклонен) и добавить «Пригласить на собеседование», «Тестовая неделя».
- **Просмотр готовых видео:** ссылки на видео (или файлы), загруженные кандидатами, должны попадать в таблицу (из бота/webhook), чтобы HR смотрел их в базе.
- **Напоминания и задачи в CRM** пока не реализовывать.

---

## 6. Дашборд

- **Расположение:** отдельный лист в той же **Google Таблице**.
- **Обновление:** в реальном времени (формулы от листов с сырыми данными бота и формы).
- **Метрики — по возможности полные:**
  - по воронке: количество на каждом этапе (старт, соцсети, видео, анкета отправлена и т.д.);
  - конверсии между этапами (в абсолютных числах и в %);
  - в разрезе **источника трафика** (канала): количество стартов, дошедших до анкеты, заполнивших анкету, по статусам HR.
- **Графики** в задачу не входят — достаточно таблиц и цифр; графики HR сможет добавить сам через стандартные диаграммы Google Sheets.

---

## 7. Что HR должен уметь без разработчика

- В **Salebot (конструктор):** добавлять/редактировать вопросы, менять текст, добавлять картинки и сообщения.
- **Добавлять новые каналы:** новые ссылки на бота с новыми UTM-метками (инструкция: «скопировать ссылку и подставить другую метку»).
- **Редактировать Google Form:** макет, поля, текст.
- **В таблице:** выставлять статусы, пользоваться фильтрами, просматривать дашборд.

Всё остальное (первоначальная настройка сценария в Salebot, Apps Script, структура листов, настройка формы и привязка к таблице) считается **одноразовой настройкой** (делает разработчик или пошаговая инструкция).

---

## 8. Референсы в репозитории

**Основное ТЗ проекта:** `Projects/CreatorBot/ТЗ.md` — актуальные требования (источник правды). При расхождении с другими файлами — приоритет у ТЗ и у заказчика.

- **ТЗ.md** — полное техническое задание; чек-лист и детали реализации.
- **HR_ИНСТРУКЦИЯ.md** — краткая инструкция для HR (канал, статусы, дашборд).
- **google_apps_script_simple.js** — базовый скрипт для таблицы (webhook); адаптировать под воронку из ТЗ.
- **salebot_simple.json** — минимальный пример структуры бота (UTM, этапы, webhook).
- **Пример формы:** ссылку заказчик пришлёт отдельно — по ней выровнять поля в таблице и маппинг.

---

## 9. Итоговый чек-лист для агента

1. **Salebot:** сценарий по требованиям заказчика из диалога: старт с сохранением UTM (`tag`), все этапы воронки (в т.ч. загрузка видео — уточнить у заказчика), webhook на каждый важный шаг с передачей `telegram_id`, `username`, `utm_source`, `funnel_step`, этап (stage), ссылки на соцсети/видео и т.д.
2. **Google Apps Script:** один стабильный endpoint для приёма данных от Salebot; запись/обновление строк по `telegram_id`; поддержка всех полей, нужных для дашборда и CRM.
3. **Google Таблица:** листы — сырые данные бота, ответы формы (или один объединённый лист с привязкой по username/telegram_id), лист для работы HR (CRM: статусы, ссылки на видео, комментарии), дашборд с формулами по воронке и по источникам.
4. **Google Form:** структура полей под анкету креатора, обязательное поле Telegram (username/ID) для связи с ботом; привязка формы к этой таблице.
5. **Документация:** краткая инструкция для HR (как добавлять канал, как менять статусы, где смотреть дашборд, как редактировать бот и форму) — обновить или дополнить `HR_ЭКОСИСТЕМА.md`.
6. **Стабильность:** минимум зависимостей, простой формат запросов Salebot → Sheets, обработка ошибок и дублей по `telegram_id`.

---

## 10. Уточнения у заказчика

- При любом расхождении между этим документом, файлами в CreatorBot и тем, что хочет заказчик — **спрашивать у заказчика**.
- Когда заказчик пришлёт **ссылку на пример Google Form** — сверить поля формы с листами таблицы и с телом webhook.
- Если заказчик пришлёт **актуальный JSON бота** — использовать его как эталон воронки и этапов для дашборда; иначе этапы уточнять в диалоге.

После согласования с заказчиком документ можно считать полным ТЗ для реализации.
