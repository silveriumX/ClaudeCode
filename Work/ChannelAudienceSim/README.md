# Channel Audience Sim — живая имитация канала

Разные **юзерботы** (разные аккаунты Telegram) комментируют посты и отвечают в тредах. Генерация — **только через LLM**, без шаблонов. У каждой персоны своя инструкция: личность, психология, история. Комментарии приходят **в разное время** (задержка + джиттер), не пачкой.

## Быстрый старт

1. **Сессии.** Для каждой персоны — свой аккаунт. Создай сессии как в TelegramBridge (`auth.py`), положи `.session` файлы в `sessions/`. Имена файлов = поле `session` в `config/personas.yaml`.

2. **Конфиг.** Скопируй `config.example.env` → `.env`. Заполни:
   - `DISCUSSION_GROUP_ID` — ID группы обсуждений канала
   - `API_ID`, `API_HASH` (my.telegram.org)
   - `OPENAI_API_KEY`, при желании `OPENAI_MODEL`

3. **Персоны.** В `config/personas.yaml` у каждой персоны: `session`, `probability`, `delay_range`, `reply_probability`, `instruction` (текст для LLM: кто он, как пишет, как реагирует). Подробнее: [config/INSTRUCTIONS_FOR_PERSONAS.md](config/INSTRUCTIONS_FOR_PERSONAS.md).

4. **Запуск.** Из корня проекта: `pip install -r requirements.txt`, затем `python src/main.py`. Добавь все аккаунты в группу обсуждений канала.

## Как это работает

- В группе обсуждений ловим **новый пост** (пересланное из канала). Для каждой персоны с вероятностью `probability` планируем комментарий с задержкой `delay_range` + случайный джиттер. Через LLM генерируем текст по `instruction` и отправляем **от соответствующего юзербота**.
- На **ответ в треде** нашему агенту — с вероятностью `reply_probability` генерируем ответ через LLM от той же персоны и шлём с того же аккаунта.

Итог: разные люди, разное время, только LLM — максимально живая имитация канала.
