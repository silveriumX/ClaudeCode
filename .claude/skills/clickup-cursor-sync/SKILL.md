---
name: clickup-cursor-sync
description: Полный цикл синхронизации задач между локальными файлами Work/Задачи и ClickUp — получение данных, сопоставление по ID/названию, применение политики конфликтов, обновление markdown.
disable-model-invocation: true
---

# ClickUp Sync

Двусторонняя синхронизация задач между локальными файлами (`Work/Задачи/`) и ClickUp по запросу.

---

## Пошаговый сценарий синхронизации

### Шаг 1: Взять соответствие списков

Прочитать `Work/Задачи/CLICKUP_СООТВЕТСТВИЕ.md`. Зафиксировать соответствие: локальный раздел / файл → ClickUp List ID.

| Локальный раздел / файл | ClickUp List ID |
|--------------------------|-----------------|
| АКТУАЛЬНЫЕ_ЗАДАЧИ.md → СЕГОДНЯ | `901520506448` |
| АКТУАЛЬНЫЕ_ЗАДАЧИ.md → СРОЧНОЕ | `901520506436` |
| ДЕЛЕГИРОВАНО | `901520506438` |
| НУЖНО УТОЧНИТЬ | `901520506437` |
| ПРОЕКТЫ | `901520506435` |
| ОЖИДАНИЯ | `901520506439` |
| Когда-нибудь.md | `901520506443` |
| Архив задач.md | `901520506444` |

### Шаг 2: Получить задачи из ClickUp

Для каждого списка из CLICKUP_СООТВЕТСТВИЕ вызвать инструменты ClickUp MCP:
- `clickup_search` с фильтром по location (list_id)
- Для каждой задачи: task_id, name, status, description, comments
- Задачи со статусом «closed» — отметить как выполненные

### Шаг 3: Сопоставить с локальными файлами

1. Прочитать релевантные файлы: `АКТУАЛЬНЫЕ_ЗАДАЧИ.md`, текущий план, `Когда-нибудь.md`
2. Для каждой задачи из ClickUp:
   - Найти локальную запись по **ClickUp ID** (строка `**ClickUp ID:** \`task_id\``)
   - Если не найдена — сопоставить по названию в соответствующем разделе
3. Локальные задачи без ClickUp ID — пометить как «только локальная»

### Шаг 4: Применить политику конфликтов

- **Статус** — из ClickUp перезаписывает локальный
- **Описание/контекст** — из ClickUp перезаписывает локальное
- **Комментарии** — из ClickUp добавить в раздел «Примечания» с датой

### Шаг 5: Обновить локальные файлы

1. Обновить статус, описание, примечания по данным ClickUp
2. Новые задачи из ClickUp — добавить в соответствующий раздел с **ClickUp ID:**
3. При необходимости создать локальные задачи в ClickUp через `clickup_create_task`, записать ID

### Шаг 6: Отчёт

- Сколько задач обновлено
- Сколько новых добавлено
- Сколько создано в ClickUp
- Конфликты и что применено

---

## Связанные файлы

- `Work/Задачи/CLICKUP_СООТВЕТСТВИЕ.md` — маппинг разделов
- `.claude/rules/task-management.md` — система задач
- `/daily-plan` — ежедневные планы
