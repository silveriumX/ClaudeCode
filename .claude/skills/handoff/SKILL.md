# /handoff — Сохранить контекст сессии

Создаёт HANDOFF.md в корне текущего проекта перед закрытием браузера.

## Когда вызывать
- При 80-90% заполнения контекста (НЕ ждать 100% — при полном сжатии детали теряются)
- Перед закрытием браузера
- По запросу: "сохрани контекст", "создай handoff", "/handoff"

## Алгоритм выполнения

1. Определить текущий проект из рабочей директории
2. Запустить `git log --oneline -5` и `git status` для текущего состояния
3. Написать HANDOFF.md в корень проекта по шаблону ниже
4. Сообщить путь к файлу

## Шаблон HANDOFF.md

```markdown
# HANDOFF — {ДАТА} {ВРЕМЯ}

## Цель сессии
Одно предложение: что пытались сделать в этой сессии.

## Сделано
- [x] Что конкретно сделано (коммит: abc1234 если есть)
- [x] Что сделано

## Текущее состояние
- Последний изменённый файл: path/to/file.py
- Последняя команда: python tests/test_x.py (все прошли / N упали)
- Бот на VPS: работает / остановлен

## Что решили и почему
- Решение: [конкретное решение] — потому что [причина]
- Отклонили: [альтернатива] — потому что [причина]

## Что НЕ пробовать (уже пробовали — не сработало)
- Пробовали X → не работает из-за Y
- Пробовали Z → вызывает баг W

## Известные проблемы / Блокеры
- [описание проблемы если есть]

## Следующие шаги (по порядку)
1. Первое конкретное действие
2. Второе конкретное действие
3. ...

## Важные файлы прямо сейчас
- `path/to/main_file.py` — основной файл работы
- `tests/test_x.py` — запускать после каждого изменения

## Справка
- Последний коммит: {HASH}
- Тесты: ✅ все прошли / ❌ N упали
```

## Правила

- **Секция "Что НЕ пробовать"** — самая важная. Предотвращает повторение ошибок.
- Файл должен быть **≤ 50 строк** — всё что длиннее не читается
- Писать как будущему себе через неделю: конкретно, без воды
- После создания: `git add HANDOFF.md && git commit -m "handoff: save session context"`

## При восстановлении контекста

В начале новой сессии:
1. Прочитать HANDOFF.md
2. Запустить `git log --oneline -5`
3. Запустить `inv test-legacy` (убедиться что всё ещё работает)
4. Начать с первого пункта "Следующие шаги"
