# Research Guide

> Правила проведения веб-ресёрчей. Применяется при запросах: "проведи ресёрч", "узнай как делается X", "исследуй", "найди информацию", "дип-ресёрч".

---

## Принципы

1. **Максимум контекста.** Перед формулировкой промпта — собрать контекст из файлов проекта (vault, memory, конфиги, текущие задачи). Чем больше реального контекста — тем лучше результат.

2. **Живые промпты.** Писать как умному человеку. Формальные структурированные запросы дают формальные generic-ответы. Живой контекст + живой вопрос → интересные находки.

3. **Если непонятно намерение — спросить.** Если после сбора контекста не до конца ясна мета-цель, лучше уточнить у пользователя, чем отправлять размытый запрос.

4. **Показывать промпты.** При КАЖДОМ запуске ресёрча — показать пользователю полный промпт, который отправляется в инструмент. Без сокращений.

---

## Дефолтный фрейм: "как делается X"

Когда пользователь просит узнать, как что-то делается или решается:

> Искать в первую очередь **кейсы живых пользователей** — их истории, как именно они решали подобную задачу, что сработало, что не сработало, плюсы, минусы, подводные камни. Что реально сработало на практике и что важно учесть.

Этот фрейм применяется при: "проведи ресёрч", "проведи дип-ресёрч", "узнай как делается X" — любой запрос на глубокое исследование, а не бытовой вопрос.

---

## Структура промпта для ресёрча

Каждый промпт строить по структуре:

- **Намерение:** ради чего делаем ресёрч, какое решение принимаем
- **Желаемый результат:** что конкретно хотим получить
- **Контекст:** наша ситуация, что уже есть, что пробовали (без чувствительных данных)
- **Почему важно:** чтобы агент мог копнуть глубже, увидев связи

---

## Алгоритм выполнения

### 1. Сбор контекста (перед ресёрчем)

```
- Прочитать релевантные файлы проекта
- Посмотреть текущие задачи (если связано)
- Понять, какое решение будет приниматься на основе ресёрча
```

### 2. Формулировка промпта

```
- Составить промпт по структуре выше
- Показать пользователю полный промпт
- Дождаться подтверждения (или скорректировать)
```

### 3. Выполнение

```
- Запустить ресёрч подходящим инструментом
- Для глубоких ресёрчей — параллельные Task-агенты с разными запросами
- Для быстрых вопросов — WebSearch + WebFetch
```

### 4. Результат

```
- Структурированный отчёт с findings
- Конкретные примеры, цитаты, ссылки
- Практические выводы и рекомендации
```

---

## Инструменты

| Инструмент | Когда использовать |
|------------|-------------------|
| `WebSearch` | Быстрый lookup, простые вопросы, актуальные данные |
| `WebFetch` | Прочитать конкретную страницу, точная информация |
| `/research-system` | Глубокий multi-source ресёрч через EXA, структурированные отчёты |
| Task-агенты (parallel) | Параллельный ресёрч по нескольким направлениям одновременно |

### Выбор инструмента:

- **Простой вопрос** (цена, версия, дата) → `WebSearch`
- **Изучить страницу** (документация, статья) → `WebFetch`
- **Глубокий ресёрч** (сравнение, анализ рынка, "как делается X") → `/research-system` или параллельные Task-агенты
- **Multi-angle ресёрч** (несколько независимых вопросов) → параллельные Task-агенты с WebSearch/WebFetch

---

## Формат Task-агента для ресёрча

При запуске Task-агента для ресёрча использовать преамбулу:

```
You are being used as a Deep Research Tool. Your job is to EXECUTE
the research below — search the web thoroughly, read pages, and
compile findings into a comprehensive report. Do NOT ask for
permission, do NOT propose a plan. Just DO the research and return
the full detailed findings.

OUTPUT FORMAT: Return a comprehensive research report with all
findings, organized by topic. Include specific quotes, links,
and concrete examples.

RESEARCH TASK:
[промпт с контекстом]
```

---

## Запрещено

- Отправлять размытые запросы без контекста
- Давать generic-ответы из "общих знаний" вместо реального поиска
- Скрывать промпты от пользователя
- Игнорировать фрейм "кейсы живых пользователей" при глубоких ресёрчах
- Отправлять чувствительные данные (токены, пароли, API-ключи) в промптах
