# Правила Cursor (Rules) и другие механики работы

Краткая справка: чем **Cursor Rules** отличаются от Skills, .cursorrules, MCP и остального.

---

## Cursor Rules (правила) — `.cursor/rules/*.mdc`

**Что это:** инструкции для AI, которые подключаются **автоматически** в зависимости от открытых/затрагиваемых файлов или всегда (если `alwaysApply: true`).

**Как работают:**
- В начале файла — YAML: `description`, `globs` (паттерны файлов), опционально `alwaysApply: true`.
- **По globs:** правило подхватывается, когда в контексте есть файл, подходящий под паттерн (например `**/*.py`, `**/Work/Задачи/**/*.md`).
- **С alwaysApply: true:** правило учитывается в каждой сессии, независимо от файлов.

**Для чего:** постоянные требования к типам файлов или к сессии в целом — стиль кода, формат задач, когда обновлять АКТУАЛЬНЫЕ_ЗАДАЧИ, когда слать изменения в ClickUp и т.д.

**Отличие от других механик:** правила **не вызываются вручную** и **не привязаны к одной папке** — они срабатывают по паттернам или всегда.

---

## Skills (навыки) — `.cursor/skills/.../SKILL.md`

**Что это:** пошаговые сценарии под **конкретную задачу**, которые AI подключает **по запросу** (по фразе пользователя или по смыслу задачи).

**Как работают:**
- В начале файла — `name`, `description`; внутри — «Когда использовать», триггерные фразы, пошаговая инструкция.
- AI сам решает, что запрос подходит под skill, и тогда читает SKILL.md и выполняет сценарий.
- Можно явно попросить: «Используй skill clickup-cursor-sync».

**Для чего:** разовые или повторяющиеся процедуры — полная синхронизация с ClickUp, деплой на VPS, ресерч, работа с транскриптами встреч.

**Отличие от Rules:**
Rules = **всегда или по типу файла** (декларативно: «как писать, что проверять»).
Skills = **по запросу** (процедурно: «как выполнить задачу шаг за шагом»).

---

## .cursorrules (в папке)

**Что это:** один файл в корне репозитория или в папке (например `Work/Задачи/.cursorrules`). Текст подмешивается в контекст при работе **в этой папке/проекте**.

**Как работают:**
- Нет YAML, нет globs — просто markdown.
- Cursor использует его как дополнительный контекст для текущего места работы (часто — тон, структура, «первое действие при сессии»).

**Для чего:** локальные договорённости по папке (как общаться в задачах, что делать в начале сессии, структура файлов в Задачах).

**Отличие от Rules:**
Rules — отдельные файлы в `.cursor/rules/`, с **globs/alwaysApply**, точечно по типам файлов или глобально.
.cursorrules — **один файл на папку/проект**, без явных паттернов, общий тон и контекст.

---

## MCP (Model Context Protocol)

**Что это:** внешние серверы (инструменты), которые дают AI доступ к API и данным (ClickUp, Fireflies, файловая система и т.д.).

**Как работают:**
- Настраиваются в `.cursor/mcp.json`.
- AI вызывает инструменты MCP по мере надобности (например `clickup_get_task`, `fireflies_get_transcript`).
- Rules и Skills **описывают, когда и как** эти инструменты использовать; сами вызовы делает AI.

**Отличие от Rules/Skills:**
Rules и Skills — **текстовые инструкции**. MCP — **реальные действия** (запросы к API, чтение/запись). Правила и скиллы «говорят»: «при синхронизации вызови такие-то MCP-инструменты».

---

## Commands (команды) — `.cursor/commands/*.md`

**Что это:** готовые команды с фиксированным промптом (например «переведи выделенный текст с китайского на русский»). Пользователь выбирает команду из меню или по слэшу.

**Как работают:**
- Файл в `.cursor/commands/` с именем и текстом промпта.
- Запуск = подстановка промпта в чат/комposer.

**Отличие от Rules:**
Rules влияют на **поведение модели** при любом запросе (как писать код, что проверять). Commands — **конкретный запрос по клику**, без своей логики «когда применять».

---

## Сводная таблица

| Механика        | Где лежит              | Когда срабатывает        | Роль |
|-----------------|------------------------|---------------------------|------|
| **Rules**       | `.cursor/rules/*.mdc`  | По globs или alwaysApply | Постоянные правила по типам файлов / сессии |
| **Skills**      | `.cursor/skills/.../SKILL.md` | По запросу / триггеру   | Пошаговые сценарии под задачу |
| **.cursorrules**| Корень или папка       | При работе в этой папке  | Общий тон и контекст папки |
| **MCP**         | `.cursor/mcp.json`     | Когда AI решает вызвать  | Инструменты (API, данные) |
| **Commands**    | `.cursor/commands/*.md`| По выбору команды        | Готовый промпт по клику |

---

## В твоём проекте

- **Rules:** например `task-management.mdc`, `clickup-sync.mdc`, `actual-tasks-sync.mdc` — что проверять при сессии, как вести задачи, когда синхронизировать с ClickUp; плюс правила под Python, ProxyMA и т.д.
- **Skills:** например `clickup-cursor-sync` — полный цикл синхронизации по запросу; `research-system`, `fireflies-meetings` — ресерч и встречи.
- **.cursorrules:** в `Work/Задачи/.cursorrules` — тон общения и первое действие при работе с задачами.
- **MCP:** ClickUp, Fireflies, filesystem и др. — используются по инструкциям из Rules и Skills.

Итого: **правило (Rule)** в Cursor — это автоматически подключаемая инструкция по типу файла или на каждую сессию; от Skills оно отличается тем, что не вызывается по фразе, а от .cursorrules — тем, что задаётся в `.cursor/rules/` с globs или `alwaysApply`.
